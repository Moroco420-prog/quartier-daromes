{% extends "base.html" %}

{% block title %}Décants - Quartier d'Arômes{% endblock %}

{% block content %}
<!-- Hero Section Décants -->
<section class="py-5" style="background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);">
    <div class="container text-center text-white">
        <h1 class="display-5 fw-bold mb-3">
            <i class="bi bi-droplet-fill text-warning"></i> Nos Décants
        </h1>
        <p class="fs-5 mb-3">Testez vos parfums préférés avant d'acheter le flacon complet</p>
        <div class="d-flex justify-content-center gap-3 flex-wrap">
            <span class="badge bg-warning text-dark fs-6">2ml</span>
            <span class="badge bg-warning text-dark fs-6">5ml</span>
            <span class="badge bg-warning text-dark fs-6">10ml</span>
        </div>
    </div>
</section>

<div class="container py-5">

    <!-- Info Section -->
    <div class="row mb-5">
        <div class="col-md-4 text-center mb-4">
            <div class="p-4 bg-light rounded">
                <i class="bi bi-droplet-half text-warning fs-1 mb-3"></i>
                <h5>Petit Format</h5>
                <p>Parfait pour découvrir de nouvelles fragrances sans engagement</p>
            </div>
        </div>
        <div class="col-md-4 text-center mb-4">
            <div class="p-4 bg-light rounded">
                <i class="bi bi-wallet2 text-warning fs-1 mb-3"></i>
                <h5>Prix Abordable</h5>
                <p>Testez des parfums de luxe à petit prix</p>
            </div>
        </div>
        <div class="col-md-4 text-center mb-4">
            <div class="p-4 bg-light rounded">
                <i class="bi bi-bag-check text-warning fs-1 mb-3"></i>
                <h5>Qualité Garantie</h5>
                <p>Décants préparés avec soin dans des flacons de qualité</p>
            </div>
        </div>
    </div>

    <!-- Decants Grid -->
    <div class="row">
        {% for decant in decants %}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 shadow-sm product-card d-flex flex-column">
                <div class="position-relative">
                    {% if decant.image_url %}
                        <img src="{{ url_for('static', filename=decant.image_url) }}" class="card-img-top" alt="{{ decant.name }}" style="height: 250px; object-fit: cover;">
                    {% else %}
                        <div class="d-flex align-items-center justify-content-center bg-light" style="height: 250px;">
                            <i class="bi bi-droplet-fill fs-1 text-muted"></i>
                        </div>
                    {% endif %}
                    
                    <!-- Boutons sur l'image -->
                    <div class="product-actions">
                        <!-- Bouton Favoris -->
                        {% if current_user.is_authenticated %}
                        <form action="{{ url_for('add_to_wishlist', product_id=decant.id) }}" method="POST">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                            <button type="submit" class="btn btn-light btn-action">
                                <i class="bi bi-heart"></i>
                            </button>
                        </form>
                        {% else %}
                        <a href="{{ url_for('login') }}" class="btn btn-light btn-action">
                            <i class="bi bi-heart"></i>
                        </a>
                        {% endif %}
                        
                        <!-- Bouton Panier -->
                        {% if current_user.is_authenticated and decant.stock > 0 %}
                        <form action="{{ url_for('add_to_cart', product_id=decant.id) }}" method="POST">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                            <button type="submit" class="btn btn-warning btn-action">
                                <i class="bi bi-cart-plus"></i>
                            </button>
                        </form>
                        {% elif not current_user.is_authenticated %}
                        <a href="{{ url_for('login') }}" class="btn btn-warning btn-action">
                            <i class="bi bi-cart-plus"></i>
                        </a>
                        {% else %}
                        <button class="btn btn-secondary btn-action" disabled>
                            <i class="bi bi-x-circle"></i>
                        </button>
                        {% endif %}
                    </div>
                </div>
                <div class="card-body d-flex flex-column flex-grow-1">
                    <span class="badge bg-warning text-dark mb-2">Décant {{ decant.size }}</span>
                    <h5 class="card-title" style="height: 2.4em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
                        {{ decant.name }}
                    </h5>
                    <p class="text-muted small mb-2">
                        <i class="bi bi-award"></i> {{ decant.brand or 'Marque Premium' }}
                    </p>
                    <p class="card-text small text-muted flex-grow-1" style="height: 3.6em; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">
                        {{ decant.description if decant.description else 'Découvrez ce parfum exceptionnel en petit format.' }}
                    </p>
                    <div class="d-flex justify-content-between align-items-center mt-auto">
                        <span class="h5 mb-0 fw-bold" style="color: #C4942F;">{{ decant.price }} DH</span>
                        {% if decant.stock > 0 %}
                            <span class="badge bg-success">En stock</span>
                        {% else %}
                            <span class="badge bg-danger">Rupture</span>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12">
            <div class="alert alert-info text-center">
                <i class="bi bi-info-circle fs-3 mb-3"></i>
                <h4>Aucun décant disponible pour le moment</h4>
                <p>Revenez bientôt pour découvrir nos nouveaux décants !</p>
                <a href="{{ url_for('collections') }}" class="btn btn-warning mt-3">
                    Voir nos collections complètes
                </a>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Size Guide -->
    <div class="card mt-5 bg-light">
        <div class="card-body">
            <h4 class="mb-4"><i class="bi bi-info-circle text-warning"></i> Guide des Tailles</h4>
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-warning text-dark rounded-circle p-3 me-3">
                            <strong>2ml</strong>
                        </div>
                        <div>
                            <strong>Format Découverte</strong>
                            <p class="mb-0 small">Environ 20-30 vaporisations</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-warning text-dark rounded-circle p-3 me-3">
                            <strong>5ml</strong>
                        </div>
                        <div>
                            <strong>Format Test</strong>
                            <p class="mb-0 small">Environ 50-75 vaporisations</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="d-flex align-items-center">
                        <div class="bg-warning text-dark rounded-circle p-3 me-3">
                            <strong>10ml</strong>
                        </div>
                        <div>
                            <strong>Format Voyage</strong>
                            <p class="mb-0 small">Environ 100-150 vaporisations</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="mt-5">
        <h3 class="mb-4">Questions Fréquentes</h3>
        <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                        Qu'est-ce qu'un décant ?
                    </button>
                </h2>
                <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Un décant est un échantillon de parfum transféré du flacon original dans un petit flacon atomiseur. 
                        Cela vous permet de tester le parfum pendant plusieurs jours avant d'investir dans un flacon complet.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                        Les décants sont-ils authentiques ?
                    </button>
                </h2>
                <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Oui, tous nos décants proviennent de flacons authentiques achetés directement auprès des distributeurs officiels. 
                        Nous garantissons l'authenticité à 100%.
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                        Combien de temps dure un décant ?
                    </button>
                </h2>
                <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        Un décant de 2ml dure environ 1 semaine avec une utilisation quotidienne, 5ml environ 2-3 semaines, 
                        et 10ml environ 1 mois. Cela dépend de votre fréquence d'utilisation.
                    </div>
                </div>
            </div>
        </div>
    </div>  
</div>
{% endblock %}
